<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 900">
  <defs>
    <linearGradient id="headerGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#1a1a2e"/>
      <stop offset="100%" style="stop-color:#16213e"/>
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="4" stdDeviation="6" flood-opacity="0.3"/>
    </filter>
    <pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">
      <path d="M 40 0 L 0 0 0 40" fill="none" stroke="#1a1a2e" stroke-width="0.5"/>
    </pattern>
  </defs>
  <rect width="1200" height="900" fill="#0f0f1a"/>
  <rect width="1200" height="900" fill="url(#grid)" opacity="0.3"/>
  <rect x="0" y="0" width="1200" height="80" fill="url(#headerGrad)"/>
  <rect x="0" y="78" width="1200" height="2" fill="#4ecca3"/>
  <text x="30" y="52" font-family="'Courier New', monospace" font-size="28" font-weight="bold" fill="#4ecca3">04</text>
  <text x="80" y="52" font-family="'Segoe UI', sans-serif" font-size="26" font-weight="bold" fill="#e0e0e0">The Finally Block</text>
  <text x="1170" y="52" font-family="'Courier New', monospace" font-size="16" fill="#555" text-anchor="end">C# Exception Handling</text>

  <rect x="40" y="110" width="1120" height="80" rx="12" fill="#1a1a2e" filter="url(#shadow)"/>
  <rect x="40" y="110" width="6" height="80" rx="3" fill="#7b68ee"/>
  <text x="70" y="145" font-family="'Segoe UI', sans-serif" font-size="22" font-weight="bold" fill="#7b68ee">ğŸ’¡ Core Concept</text>
  <text x="70" y="175" font-family="'Segoe UI', sans-serif" font-size="18" fill="#c0c0c0">The <tspan fill="#7b68ee" font-weight="bold">finally</tspan> block runs <tspan fill="#ffc107" font-weight="bold">no matter what</tspan> â€” whether an exception was thrown or not. Used for <tspan fill="#4ecca3">cleanup</tspan>.</text>

  <!-- Three path diagram -->
  <rect x="40" y="215" width="1120" height="400" rx="12" fill="#1a1a2e" filter="url(#shadow)"/>
  <text x="60" y="250" font-family="'Segoe UI', sans-serif" font-size="18" font-weight="bold" fill="#ffc107">ğŸ“Š Three Scenarios â€” Finally ALWAYS Runs</text>

  <!-- Path 1: No exception -->
  <rect x="70" y="275" width="330" height="310" rx="10" fill="#4ecca3" opacity="0.08" stroke="#4ecca3" stroke-width="1"/>
  <text x="235" y="300" font-family="'Segoe UI', sans-serif" font-size="16" fill="#4ecca3" text-anchor="middle" font-weight="bold">Path 1: No Exception</text>
  <rect x="90" y="315" width="290" height="35" rx="6" fill="#4ecca3" opacity="0.2"/>
  <text x="235" y="338" font-family="'Courier New', monospace" font-size="13" fill="#4ecca3" text-anchor="middle">try { ... } âœ… succeeds</text>
  <text x="235" y="365" font-family="'Segoe UI', sans-serif" font-size="16" fill="#888" text-anchor="middle">â†“ skip catch</text>
  <rect x="90" y="380" width="290" height="35" rx="6" fill="#888" opacity="0.15"/>
  <text x="235" y="403" font-family="'Courier New', monospace" font-size="13" fill="#555" text-anchor="middle">catch { } â€” skipped</text>
  <text x="235" y="430" font-family="'Segoe UI', sans-serif" font-size="16" fill="#888" text-anchor="middle">â†“</text>
  <rect x="90" y="445" width="290" height="35" rx="6" fill="#7b68ee" opacity="0.3"/>
  <text x="235" y="468" font-family="'Courier New', monospace" font-size="13" fill="#7b68ee" text-anchor="middle" font-weight="bold">finally { } âœ… RUNS</text>
  <text x="235" y="498" font-family="'Segoe UI', sans-serif" font-size="14" fill="#4ecca3" text-anchor="middle">âœ… Program continues</text>

  <!-- Path 2: Caught exception -->
  <rect x="430" y="275" width="330" height="310" rx="10" fill="#ffc107" opacity="0.08" stroke="#ffc107" stroke-width="1"/>
  <text x="595" y="300" font-family="'Segoe UI', sans-serif" font-size="16" fill="#ffc107" text-anchor="middle" font-weight="bold">Path 2: Caught Exception</text>
  <rect x="450" y="315" width="290" height="35" rx="6" fill="#e94560" opacity="0.2"/>
  <text x="595" y="338" font-family="'Courier New', monospace" font-size="13" fill="#e94560" text-anchor="middle">try { ... } ğŸ’¥ throws!</text>
  <text x="595" y="365" font-family="'Segoe UI', sans-serif" font-size="16" fill="#888" text-anchor="middle">â†“ jumps to catch</text>
  <rect x="450" y="380" width="290" height="35" rx="6" fill="#e94560" opacity="0.15"/>
  <text x="595" y="403" font-family="'Courier New', monospace" font-size="13" fill="#e94560" text-anchor="middle">catch { } â€” handles it</text>
  <text x="595" y="430" font-family="'Segoe UI', sans-serif" font-size="16" fill="#888" text-anchor="middle">â†“</text>
  <rect x="450" y="445" width="290" height="35" rx="6" fill="#7b68ee" opacity="0.3"/>
  <text x="595" y="468" font-family="'Courier New', monospace" font-size="13" fill="#7b68ee" text-anchor="middle" font-weight="bold">finally { } âœ… RUNS</text>
  <text x="595" y="498" font-family="'Segoe UI', sans-serif" font-size="14" fill="#4ecca3" text-anchor="middle">âœ… Program continues</text>

  <!-- Path 3: Uncaught exception -->
  <rect x="790" y="275" width="330" height="310" rx="10" fill="#e94560" opacity="0.08" stroke="#e94560" stroke-width="1"/>
  <text x="955" y="300" font-family="'Segoe UI', sans-serif" font-size="16" fill="#e94560" text-anchor="middle" font-weight="bold">Path 3: Uncaught Exception</text>
  <rect x="810" y="315" width="290" height="35" rx="6" fill="#e94560" opacity="0.2"/>
  <text x="955" y="338" font-family="'Courier New', monospace" font-size="13" fill="#e94560" text-anchor="middle">try { ... } ğŸ’¥ throws!</text>
  <text x="955" y="365" font-family="'Segoe UI', sans-serif" font-size="16" fill="#888" text-anchor="middle">â†“ no matching catch</text>
  <rect x="810" y="380" width="290" height="35" rx="6" fill="#888" opacity="0.1"/>
  <text x="955" y="403" font-family="'Courier New', monospace" font-size="13" fill="#555" text-anchor="middle">catch { } â€” wrong type</text>
  <text x="955" y="430" font-family="'Segoe UI', sans-serif" font-size="16" fill="#888" text-anchor="middle">â†“</text>
  <rect x="810" y="445" width="290" height="35" rx="6" fill="#7b68ee" opacity="0.3"/>
  <text x="955" y="468" font-family="'Courier New', monospace" font-size="13" fill="#7b68ee" text-anchor="middle" font-weight="bold">finally { } âœ… STILL RUNS</text>
  <text x="955" y="498" font-family="'Segoe UI', sans-serif" font-size="14" fill="#e94560" text-anchor="middle">ğŸ’¥ Then crashes</text>

  <!-- Use cases -->
  <rect x="40" y="640" width="1120" height="210" rx="12" fill="#1a1a2e" filter="url(#shadow)"/>
  <text x="60" y="675" font-family="'Segoe UI', sans-serif" font-size="18" font-weight="bold" fill="#4ecca3">ğŸ§¹ When to Use Finally â€” Cleanup Tasks</text>
  <rect x="80" y="700" width="310" height="55" rx="8" fill="#4ecca3" opacity="0.1" stroke="#4ecca3" stroke-width="1"/>
  <text x="235" y="723" font-family="'Segoe UI', sans-serif" font-size="14" fill="#4ecca3" text-anchor="middle">ğŸ“ Close file streams</text>
  <text x="235" y="743" font-family="'Courier New', monospace" font-size="11" fill="#888" text-anchor="middle">reader.Close();</text>
  <rect x="420" y="700" width="310" height="55" rx="8" fill="#7b68ee" opacity="0.1" stroke="#7b68ee" stroke-width="1"/>
  <text x="575" y="723" font-family="'Segoe UI', sans-serif" font-size="14" fill="#7b68ee" text-anchor="middle">ğŸ”Œ Release connections</text>
  <text x="575" y="743" font-family="'Courier New', monospace" font-size="11" fill="#888" text-anchor="middle">connection.Dispose();</text>
  <rect x="760" y="700" width="370" height="55" rx="8" fill="#ffc107" opacity="0.1" stroke="#ffc107" stroke-width="1"/>
  <text x="945" y="723" font-family="'Segoe UI', sans-serif" font-size="14" fill="#ffc107" text-anchor="middle">ğŸ“Š Log completion status</text>
  <text x="945" y="743" font-family="'Courier New', monospace" font-size="11" fill="#888" text-anchor="middle">Console.WriteLine("Done.");</text>

  <rect x="80" y="775" width="1050" height="50" rx="8" fill="#e94560" opacity="0.08" stroke="#e94560" stroke-width="1"/>
  <text x="605" y="805" font-family="'Segoe UI', sans-serif" font-size="16" fill="#e94560" text-anchor="middle" font-weight="bold">ğŸ’¡ Think of finally as: "No matter what happened, do THIS before leaving."</text>

  <rect x="0" y="880" width="1200" height="20" fill="url(#headerGrad)"/>
  <text x="600" y="894" font-family="'Courier New', monospace" font-size="12" fill="#555" text-anchor="middle">Exception Handling in C# â€” Section 4 of 7</text>
</svg>